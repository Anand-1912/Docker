1. wkt the Container has its internal file system.

2. Three types of data need to be dealt with when working with the containers

   - **Application Code + environment data (Readonly)**
     Examples: Source code + node runtime

   - **Temporary Data**
     Examples: Stack data

   - **Persistent Data**
     Examples: Logs

3. **Note:** When we stop the containers, since the host retains the container, the data generated by the container will not be removed.Hence, when the same container is started again (using _docker start_ command), the data can be accessed. But when the container is removed, the data generated by the container will also be removed along with the container.

4. To resolve the above issues, Named Volumes are used.

   - Types of Volumes:

   1. Anonymous Volumes (removed when the container is removed)
   2. Named Volumes (retained)

   - Volumes are folders on the host machine (hard drive) which are mounted ("made available", mapped) into containers.When a container is removed, the Volumes (only Named Volumes) are not removed since they are present as part of the host system and not as part of the container.

   - Containers can read data from Volumes and write to them as well.

   - Anonymous Volume Instruction is provided as part of the Image definition

     - `VOLUME [ <PATH_INSIDE_CONTAINER_WHICH_CONTAINS_THE_DATA_TO_BE_PERSISTED> ]`

     - eg: VOLUME [ "/app/feedback" ]

     **Here, the local host folder will be managed by the docker itself. we didn't provide the local host folder path where the data is persisted**

   - Named Volumes are given when creating the container with _v flag_.

```
     Eg: docker run -p 3000:80 --rm --name feedback-app -v feedback:/app/feedback feedback-image:volumes

     here -v <VOLUME_NAME>:<PATH_INSIDE_THE_CONTAINER>

     docker volume ls

     - Lists all the Anonymous and Named Volumes

     - Anonymous volumes won't have any names. They will be removed when the container is removed but Named volumes are not.

     - docker container inspect <CONTAINER_NAME>

```

**In both of these types (i.e) Anonymous Volumes and Named Volumes, the Docker manages the Volumes and we don't have control over the local host path where docker persists the data. We cannot use or manipulate those folders. We have to use Bind mounts to overcome this issue.**

---

Bind Mounts

**Note**: used in Development and not in Production

---

1. Can be used for Code Sharing

```
 docker run -d -p 3000:80 --name feedback-app
 -v feedback:/app/feedback
 -v "C:\Users\Admin\Desktop\Certificates\Docker\07.Data_And_Volumes_Feedback_App:/app"
 -v /app/node_modules
 feedback-node:latest

```

-v feedback:/app/feedback => named volume

-v "C:\Users\Admin\Desktop\Certificates\Docker\07.Data_And_Volumes_Feedback_App:/app" => Bind Mount

-v /app/node_modules => Anonymous Volume

2. Read only Volumes (:ro)

```
 docker run -d -p 3000:80 --name feedback-app
 -v feedback:/app/feedback
 -v /app/temp
 -v "C:\Users\Admin\Desktop\Certificates\Docker\07.Data_And_Volumes_Feedback_App:/app:ro"
 -v /app/node_modules
 feedback-node:latest

```

### note

1. Named Volumes and Anonymous volumes are managed by Docker. We don't have any control on where Docker manages the folder for these Volumes in the local host.

2. Named Volumes are persisted and retained even after the container is removed. We won't be able to manipulate the data stored inside the named volumes but a container can.

3. If we want a particular set of data to be accessed only by the Application (Container) and not through the local file system by users, then they (such data) have to be managed by Named volumes.

4. In this example, if we dont use Named volumes for the feedback path, then since Bind mount has been enabled for the entire App folder, the container will write the feedback files directly inside the local system feedback path which we can manage through file system.

5. In this example, Anonymous volume is used to retain node_modules folder until the container is stopped. The reason we have anonymous volume here is to avoid the folder node_modules being overwritten by the instruction **docker command COPY . .** in the Docker file.

---

Managing Docker Volumes

---

1. docker volume --help

2. docker volume create test-volume

3. docker volume rm test-volume

4. docker volume prune

5. docker volume ls

---

## Docker Ignore file

.dockerignore file contains the list of files and folders that needs to be ignored by docker when copying files from localhost to container when executing `COPY . .`
